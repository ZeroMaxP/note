1、新建项目夏令营
2、在其上点右键->new->python package,创建子文件夹
3、在子文件夹上右键->file，txt文件写笔记;在file一个python文件

4、应用领域:
    自动化运维
    人工智能 机器人
    web开发
    云计算
    爬虫 数据分析 数据挖掘

5、python程序设计
    1、程序由模块组成
    2、模块由函数和类组成
    3、函数由语句组成
    4、语句由表达式组成
    5、import 用来调用模块，可以自己写与下载

6、python的核心数据
    1、int
    2、浮点型
        3.
        0.13
        .13
    3、复数
        分为实部、虚部
        虚部是以J,j结尾的数据
    4、布尔型
        True(通常表示为1)
        False(通常表示为0)

7、表达式和运算符
        1+2
        表达式
        由数字和运算符组成
        作用:
            通常让计算机做一些事并返回结果
            表达式是表示一件事情，语句是做这件事情

8、运算符
        加减乘除
        //地板除
        %求余
        **幂运算
        除法得到的是数据类型是浮点型，不会丢弃小数点后面的部分

练习:
    一个商店卖西瓜，七元一个人，20能买几个，还剩多少钱？
    一个学生，薪资10000，每年涨20%，请问十年后这个学生薪资多少？

基本输出函数

print()

打印图形

```python
str = '''*****
*   *
*   *
*****'''

print(str)
```





# 基础

## 变量

1. 定义
   1. 变量是绑定一个对象`标识符` 
2. 命名规则
   1. 开头不能是数字，符号
   2. 变量的名字是区分大小写
   3. 不能用python中的关键字
3. 赋值
   1. 默认符号 `=`
   2. 语法`变量名=表达式`
4. 作用
   1. 创建一个变量，此变量来绑定数据对象
   2. 修改一个变量的绑定关系,让其绑定另一个对象
5. 说明
   1. 当变量不存在时，创建该变量，同时将变量绑定到这个对象上
   2. 当变量存在时，改变此变量绑定的关系
   3. 一个变量只能绑定一个对象上
   4. 两个变量可以同时绑定在一个对象上

a = 1000000

b = 2000000

a = a + b 释放对象10000，让a重新绑定到30000这个对象上 python自动化内存管理

#### 自动化内存管理和引用计数

​		每个对象都会记录有几十个变量绑定（引用）自身，当引用的数量为0时，

##### is 与 is not 运算符

作用：

​		判断两个对象是否是同一个对象，值为True和False

##### id() 函数

作用：

​		返回一个对象的内存地址

##### 小整数对象池

整数-5到256的数永远存在于小整数对象池中，不会释放且可以重复利用

##### 复合赋值运算符

+=	-=	-=	/=	//=	%=	**=

x + y

x +=y

### 练习

交换练习

a = 1000000

b = 2000000

在不创建新的变量的情况下，让a,b的绑定的对象互换

```python
a=100000
b=200000
print(a,b)
a,b=b,a
print(a,b)
```

方法1

t=a

a=b

b=t

#### 删除变量

1. 作用：
   1. 用于删除变量，同时解除绑定对象的关联关系，如果可能会释放对象
2. 语法
   1. del 变量名 `del a`

```python
del a
```

```python
>>> a,b=257,257   
>>> a is b      
False
>>> a,b=256,256 
>>> a is b      
True
```

### 练习

1. 中国古代的秤是十六两一斤，请问如今的216两是古代的几斤几两

2. 假设一年只有365天，输入年数，打印这些年有多少周

3. 分 三次输入当前的小时，分钟，秒数,在终端打印时间距离

   0:0:0 过了多少秒

## if语句

作用：让程序选择性执行一条语句

​		if 表达式1:

​			语句块1

​		elif 表达式2:

​			语句块2

​		elif 表达式3:

​			语句块3

​		……

​		else:

​			语句块4

#### 练习

​		输入一年中的月份(1-12),输出这个月是哪个季度，如果是其他则提示输出有误

## 布尔运算

not	and	or

#### not运算

​		如果bool(x)为True,返回结果false,如果bool(x)为false，返回结果为True

#### and运算

​		语法

​				x and y

​		说明

​				同时为True才为True

#### or运算

​		语法

​				x or y

​		说明

​				同时为False才为False

## 字符串

​		定义：不可变的序列容器

​		作用：用于存储文本文字信息

表示方法：在非注释的情况下，三单引号和双引号

```
'''
'''
"""
"""
```

三引号中换行会自动视为\n

用转义字符代表特殊符号

作用：

​		字符串的字面值中用反斜杠\后跟一些字符代表特殊的一个符号

raw 字符串

```python
r'字符串内容'  r""字符串内容""
```

作用：

​		让转义\失效

+=用于字符串的拼接，并对原来的字符串进行赋值

*用于生成重复的字符串

*=用于生成重复的字符串并对原来的字符串进行赋值

#### 字符串的基本操作

1.索引取值

2.正向索引 从0开始 反向索引从-1开始

#### 切片操作

作用：

​		从字符串序列中取出相应的元素重新组成相应的元素重新组成新的字符串

语法

​		字符串[(开始索引):(结束索引)]

说明

​		开始索引是切片结束切下的位置，0代表第一个元素，1代表第二个元素

​		结束索引代表切片结束切下的位置，带上不包含索引点

​		左闭右开

步长

​		定义：步长是切片每次获取完当前元素后移动的方向和偏移量

​		步长可以不写，默认为1

​		步长为正数，正向切片

​		步长为负数，反向切片

字符串的比较运算

​		ord 返回字符的编码值

​		chr 返回对应编码值的字符

字符串构造函数str()

格式化字符串

%s	%d	%%

#### 练习

输入三行文字，让这三行文字依次按以20个字符的 宽度右对齐

如：

输入第一行：hellow world

输入第二行：abcd

输入第三行：aaaaaa

打印结果

​				hellow world

​							abcd

​						aaaa

## 循环语句：

​		作用：

​				根据一定的条件，重复执行一条语句或者多条语句

​		语法：

​				while 真值表达式

​						语句块1

​				else:

​						语句块2

说明

1. 先执行真值表达式，再得到布尔值为True，或者False
2. 如果真值表达式的值为True，则执行语句块1，然后再次返回到第一步，重复执行测试真值表达式的值
3. 如果真值表达式的值为False，则执行else语句下的语句块2，然后结束while语句的执行
4. else部分可以省略
5. 需要注意:
   1. 创建并初始化一个空的while循环的变量
   2. 通过真值表达式控制循环体
   3. 通常用循环变量来控制循环条件防止死循环

#### 练习

1. 用while打印1-20个正数
2. 用while打印1-20个整数在一行
3. 用while打印1-20个整数，每行五个

```python
x=1
while (x<=20):
    print(x)
    x+=1

x=1
sum=""
while (x<=20):
    sum += str('{0:<3d}'.format(x))
    x+=1
print(sum)

x=1
while (x<=20):
    print(x,end=" ")
    x+=1

x=1
while x<=20:
    print(x,end=" ")
    x+=1
    if x%5==0:
        print()

x=1
count=0
sum=""
while (x<=20):
    if count<5:
        sum += str('{0:<4d}'.format(x))
        x+=1
        count+=1
    else :
        print(sum)
        sum=""
        sum += str('{0:<4d}'.format(x))
        x+=1
        count=1
print(sum)
```

#### 练习

1. 输入一个整数n，打印指定宽度的正方形
2. 打印九九乘法表

```python
count = int(input("请输入一个整数"))
i=0
while i<count:
    j=1
    while j<=count:
        print(j,end=" ")
        j+=1
    print()
    i+=1

for x in range(count):
    for x in range(1,count+1):
            print(x,end=" ")
    print()


i=1
j=1
while i<=9:
    j=i
    while j<=9:
        print(i,"X",j,"=","%-3d" % (i*j),end ="")
        j+=1
    i+=1
    print()
```

#### 课前复习练习

​		让用户任意输入一些整数，当输入为负数时结束，当输入完成时打印这些数字的总和

###  for 循环

1. 作用：
   + 用来遍历可迭代对象的数据元素
   + 可迭代对象是指依次能够获取数据元素的对象
   + 比如：字符串，列表，元组，range()
2. 语法
   + *for 变量名 in 可迭代对象*
     + 语句块1（可能是多次执行的语句）
3. continue语句
   * 作用：
     * 用于循环语句(while,for)中，不再执行本次循环，重新开始一次循环
     * 在for循环中执行continue语句，将会从可以迭代的对象中取下一个数据绑定变量后再次进行绑定

写一个程序，输入任意一个字符串，打印这个字符串有多少个空格

### range()函数

> range(stop) 用来生成0-stop区间内的整数，直到stop为止（不包含stop）

> range(start,stop) 用来生成start-stopp区间内的整数，直到stop为止（不包含stop）

> range(start,stop,step) 用来生成start-stopp区间内的整数,以setp为步长，直到stop为止（不包含stop）

+ 作用：
  + 创建一个生成一系列整数的可迭代对象（也叫整数序列生成器）

## 列表

### 定义：

> 列表是一个容器

> 列表是可以改变的序列容器

> 列表是一系列元素组成，元素与元素之间可以没有任何关联关系，但是会有先后的顺序关系

列表创建：
L=[]创建一个空列表

通过构造器创建列表

list()创建空列表

list(可迭代对象) 创建非空列表

### 列表的运算

+ 运算符

> +=	+	*	*=

+ `+`加号用于拼接列表
+ ``+=``用于拼接列表
+ ``*``用于让原来的列表出现多次
+ ```*=```让原来的列表出现多次并用原变量绑定

### 练习

​		用循环输入文字，将每次输入的文字保存在一个列表L中，当输入空行时结束输入，并打印L的内容

### in 	/ 	not in

判断一个元素是否在某个列表中，如果存在返回True,如果不存在返回False

### 列表的索引操作

1. 索引取值
   - 语法：
     - x = 列表名[整数表达式]
2. 索引赋值
   * 列表是可变的序列，可以通过索引赋值改变列表中的元素
   * 语法
     * 列表[整数] = 表达式

### 列表的切片操作

1. 切片取值：

	+ 语法：
        + 列表[(开始索引):(结束索引):(步长)]
        + 列表的切片取值是从原来列表中取出想要的元素再次组成一个新的列表
   
2. 切片赋值

   + 语法：
     + 列表[切片] = 可迭代对象
   + 作用：
     + 改变原来列表的排列，克影城出入和修改数据
   + 说明：
     + 切片赋值的赋值运算符(=)的右侧必须是一个可迭代对象
+ 注意事项
     + 对于步长不等于1的切片赋值，赋值运算符的右侧的可迭代对象提供的元素个数，一定要等于切片切出的段数
     

#### 练习

生成一个列表L = [‘A1’,‘A2’,‘A3’,‘B1’,‘B2’,‘B3’,‘C1’,‘C2’,‘C3’]

语法：

​		[表达式 	for 	变量1 	in 	可迭代对象1 	if	 真值表达式1 	for 	变量2 	in 	可迭代对象2 	if 	真值表达式2]

```python
L = [x + y for x in "ABC" for y in "123"]
```

#### len(x)

​		返回序列的长度

#### max(x)

​		返回序列的最大值元素

#### min(x)

​		返回序列的最小值元素

#### sum(x)

​		返回序列所有元素的和(元素必须是数字类型) 

#### 练习

​		写一个程序，让用户输入很多个正整数，当输入负数时结束输入，将用户输入的数字存储在列表中。

1.打印存有数字的列表

2.求出这些数字的平均值

3.求出这些数字中的最大值

### Python3中的常用方法

#### list.append(obj)

​		在序列的末尾位置添加一个对象obj

​		返回值：没有返回值，对原来的列表进行修改

#### list.extend(seq)

​		在列表末尾一次性追加另一个序列中的各个值

​		参数：seq 元素列表

​		返回值：没有返回值，对原来的列表添加新的内容

#### list.count(obj)

​		统计元素在列表中出现的次数

​		参数：obj	列表中统计的对象

​		返回值：返回元素在列表中出现的次数

#### list.index(obj)

​		从列表中找到某个值第一个匹配项的索引位置

#### list.insert(index,obj)

​		将对象插入列表

​		参数：insert 对象obj需要插入的索引位置

​					 obj 需要插入的对象

#### list.pop([index ])

​		移除列表中的一个元素（默认为最后一个元素），并返回该元素的值

​		参数：index 可选参数,要移除列表元素的索引值，不能超过列表总长度，该方法返回列表中移除的元素对象

#### list.remove(obj)

​		移除列表中的某个值第一个匹配项

#### list.sort(reverse=False)

​		对原来的列表进行排序

​		参数：reverse 排序规则,为True降序, False升序（默认）

​		返回值：没有返回值，但是对原来的列表对象进行排序		

#### 练习

​		编写一个名字管理系统

1. 添加名字
2. 删除名字
3. 修改名字
4. 查看名字
5. 退出系统

#### 列表与字符串的比较

1. 列表和字符都是序列，元素与元素之间有先后顺序关系
2. 字符串是不可变的序列，列表是可变的序列
3. 字符串的每个元素只能存储字符，而列表可以存储任意类型的元素
4. 列表和字符串都是可迭代对象

##  元组

1. 定义
   - 元组是不可变的序列，同list一样，元组是可以存储任意类型的数据
2. 表示方式
   - 用小括号括起来，单个元素括起来后加括号（,），区分单个对象还是元组
   - (20) 是数值 (20,)是元组
3. 创建元组
   - t = ()
   - tuple([可迭代对象]) # tuple() = ()
4. 元组的运算
   - 比较运算，索引和切片与列表完全相同
   - 但是元组不知处索引赋值和切片赋值

## 字典

1. 字典是一种可变的容器，可以存储任意类型的数据
2. 字典中的每个数据都是用`键`(key)进行索引的，而不像序列（str,list,tuple）可以用整数进行索引
3. 字典中的数据没有先后顺序关系，字典的存储是无序的
4. 字典中的数据键(key)，值(value)对形势进行存储
5. 字典的键不能重复，且只能用不可变的类型作为字典的键
6. 字典创建的字面值方式
   * 字典的表示方式以{}括起来，以冒号(:)分隔键值对,各键值对之间用逗号分隔
7. 创建字典
   - d = {[可迭代对象]} #[] 可选
   - dict{**kwargs} 关键字传参形式生成一个字典
   - 注意：字典的键必须为不可变类型的值
   - 可变的数据类型 list dict set

```python
dict([['a',1],['b',2]]) 
```

### 字典的基本操作

1. 字典的索引操作
   1. 语法：字典[键]
   2. 作用:用键获取字典的键的对应值
2. 添加和修改字典
   1. 语法：字典[键] = 值
   2. 说明：
      1. 键不存在时，创建键，并绑定对应的值
      2. 键存在时修改键绑定的值
3. 删除字典
   1. del 语句
      1. 语法：del 字典[键]
4. in /not in
   1. 判断一个键是否在一个字典内

#### 练习

1. 写一个程序
   1. 将如下数据形成一个字典seasons

```python
{
    1: '春季有1,2,3月',
    2: '夏季有4,5,6月',
    3: '秋季有7,8,9月',
    4: '冬季有10,11,12月'
}
```

​			2.让用户输入一个整数代表这个季度，打印这个季度对应的信息:如果用户输入的数字不在字典内，则提示用户信息不存在

### 字典的迭代访问

字典是可迭代对象，字典只能对键进行迭代访问

for key in dict

dict.items() 返回的是键值元组数组

#### 练习

输入一段字符串，打印出这个字符串出现过的字符及字符出现过的次数

### 字典的内置方法

1. dict.clear()
   - 删除字典内所有的元素
   - 该方法没有参数没有返回值
2. dict.fromkeys(seq,[value])
   - 创建一个新的字典，以序列seq中元素做字典的键，value为字典所有键对应的值
   - 参数
     - seq 字典键值列表
     - value 可选参数,设置键序列(seq)的值

### 字典与列表比较

1. 都是可变的容器
2. 索引方式不同，列表用整数索引，字典用键索引
3. 列表的存储是有序的，字典的存储是无序的
4. 字典的插入，删除，修改的速度要快于列表（重点）

### 练习

任意输入很多个学生的姓名，年龄，成绩，每个学生的信息到字典中然后存放在列表里

​		每个学生的信息需要手动输入

​		输入回车后结束		

### python 判断中文字

```python
def is_chinese(uchar):
    """判断一个unicode是否是汉字"""
    if uchar >= u'\u4e00' and uchar<=u'\u9fa5':
        return True
    else:
        return False
```

### 编写名片管理系统

1. 添加一张名片
2. 删除一张名片
3. 修改一张名片
4. 查看一张名片
5. 查看所有名片
6. 退出系统

## 集合

> 集合是可变的容器
>
> 集合内的数据对象都是唯一的(不能重复出现多次)
>
> 集合内的元素必须是不可变对象
>
> 集合是可迭代对象（可以用for循环遍历）
>
> 集合是相当于只有键没有值的字典（键是集合的数据）

1. 创建集合的构造函数 	set([可迭代对象]) #[]可选
2. s =set(‘sss’) #s={‘s’}
3. 集合的添加与删除操作
   - add()吧要传入的元素作为一个整体添加到集合中
   - update() 把要传入的元素拆分，作为个体传入到集合中
   - remove() 删除集合中要删除的元素
4. 集合中的运算
   - 交集& 		并集|		补集-		对称补集^		子集<		超集>
   - s1-s2 是在s1中但是不在s2中
   - s1<s3 是s1是s3的子集
   - s3>s1 是s3中包含了s1
   - s1^s2 是s1-s2 和s2-s1的并集

### 练习

经理有：曹操，刘备，孙权

技术员有：曹操，孙权，张飞，关羽

用集合求：

1. 既是经理又是技术员的是：
2. 是经理但不是技术员的是：
3. 是技术员但不是经理的是：
4. 张飞是经理吗
5. 身兼一职的是：
6. 经理和技术员共有几个

### 固定集合

固定集合是不可变的,无序的,含有唯一元素的集合

- 作用：
  - 固定集合可以作为字典的键，还可以作为集合的值
  - 固定集合的构造函数是frozenset
  - frozenset()创建一个空的固定集合
  - frozenset(可迭代对象)通过可迭代对象创建一个固定集合

## 总结

数据类型

- 不可变的类型：

  - bool	int	float	complex	str	tuple	frozenset
- 可变的数据类型:

  - list	dict	set
- 运算符:

  - `+	-	*	/	//	%	**	>	>=	<	<=	==	!=	`
  - `in	 	not in		is		is not		not		and		or`
  - `&	|	^	-`
- 语句：
  - 表达式：1+2
  - 赋值：=
  - del	if	while	for	break	continue	pass
  - 内置函数:
    - 构造函数：
      - bool()	int()	float()	complex()	str()
      - list()	tuple()	dict()	set()	frozenset()
    - 基本的输入输出函数：
      - input()	print()
    - id()	返回内存地址	type()	返回类型

# 函数

1. 函数的定义：

   1. 函数是组合好的，可以重复利用，用来实现单一或者相关联功能的代码段

2. 函数的作用

   1. 能提高应用的模块性和代码的重复利用率

3. 函数的创建

   1. 定义函数的规则:

      1. 函数代码块以def关键字开头,后接函数函数标识符名称和圆括号()
      2. 所有传入的参数和自变量都必须在圆括号内,可以在圆括号内定义参数
      3. 函数的第一行语句可以选择性的使用文档字符串,用于存放函数说明
      4. 以冒号结尾,内容必须有缩进
      5. return [表达式]结束函数，选择性的返回一个值给调用者,不带表达式的return相当于返回none

   2. 语法：

      1. def 函数名(参数列表)：
   
1. 函数体
   
4. 函数的参数

    1. 参数分类：
        1. 位置传参，序列传参，关键字传参，默认参数，字典关键字传参
    2. 综合传参：
        1. 形参：（形式参数）
        2. 在用def关键字定义函数名后面括号里的变量称为形式参数
        3. 实参：（实际参数）
        4. 在调用函数时提供的值或者变量称为实际参数
    3. 位置传参
        1. 定义：
            1. 实际参数（实参）的对应关系与形式参数（形参）的对应关系是按位置来依次对应。
        2. 说明：
            1. 实参和形参通过位置进行传递和匹配
            2. 实参的个数必须与形参的个数相同
    4. 序列传参
        1. 序列传参是指在函数调用的过程中，用*将序列解析后按位置进行传递的参数方式
        2. 说明：
            1. 序列传参，序列拆解的位置将与形参一一对应
            2. 序列的位置信息对应相应的形参位置
    5. 默认传参（要放在位置参数后面）
        1. 调用函数时，如果没有传递参数，就会使用默认参数
        2. 使用默认参数，就是定义函数时，给参数一个默认值
        3. 如果没有给调用的函数参数赋值，调用的函数就会使用这个默认值
    6. 关键字传参
        1. **接收字典关键字,键必须是字符串,键必须和形参的名字一样
        2. 说明：
            1. 字典的键名和形参名必须一致
            2. 字典的键名必须为字符串
            3. 字典的键名要在形参中存在
    7. 函数的综合传参
        1. 定义：
            1. 函数的传参方式在能确定形参能唯一匹配到相应实参的情况下可以任意组合
        2. 说明：
            1. 位置传参（序列传参）要在关键字传参（字典关键字传参）的左边

    ## 练习

    1.写一个minmax(a,b,c)有三个参数,返回这三个参数的最小值和最大值，要求形成元组，最小值最前面，最大值在后面

    def minmax(a,b,c):

    ​		……

    ## 函数的形参定义

    1. 语法：
    
2. 可变参数
       1. 作用：
          1. 传入不限量的参数
    3. 双星号字典形参
       1. 语法：
          1. def fun(**字典关键字形参名):
             1. 语句块
       2. 作用：
          1. 收集多余的关键字形参
    4. 函数的参数说明
       1. 位置形参，星号元组形参，命名关键字形参，双星号字典形参可以混合使用函数形参自左往右
       2. 位置形参
       3. 星号元组形参
       4. 命名关键字形参
       5. 双星号字典形参
   
    ### 练习
   
    写一个函数，mymax类似于内置的max函数完全相同
   
    ## 局部变量
   
    ## 全局变量
   
    globals()/locals()函数
   
    globals() 返回当前全局作用域内变量的字典
   
    locals()返回当前局部作用域内变量的字典
   
    ## 函数变量
   
    函数名是变量，它在def 语句创建函数时绑定一个函数
   
    def fa():
   
    ​		print(‘订单’)
   
    f1 = fa
   
    fa()
   
    f1()
   
    可以作为另一个函数的实参传递
   
    ## 函数的嵌套
   
    ```Python
    def f1():
        print('1')
        def f2():
            print('2')
        f2()
    ```
   
   ## global语句
   
   1. 作用
      1. 告诉解释器执行器global语句声明一个或者多个变量,这些变量的作用域为块级作用域，也称作全局变量
      2. 全局声明(global)将赋值语句操作的变量映射到模块文件内部的作用域
   2. 语法：
      1. global (variable1 ,variable2)
      2. 默认的函数内的参数无法修改全局变量，用global语句定义后则可以
   
   ## lambda:表达式
   
   1. 格式
      1. lambda:表达式
   2. 说明：
      1. lambda只是一个表达式,用来创建一个函数对象
      2. 调用时先执行冒号后的表达式，并返回表达式结果的引用关系
      3. lambda表达式创建函数只能包含一条语句
      4. lambda比函数简单切可以随时创建和销毁，有利于减少程序的耦合度

## 异常定义

1. 异常是程序
2. 语句：
   1. try -except 语句
      1. 语法：
         1. try 
            1. 可能触发议程的语句
         2. except 错误类型1[as 变量1]:
            1. 异常处理语句1
         3. except 错误类型1[as 变量2]:
            1. 异常处理语句2
         4. except (错误类型3,错误类型4,错误类型5)[as 变量3]：
            1. 异常处理语句3
         5. except :
            1. 异常处理语句（其他）
         6. else:
            1. 未发出异常语句
         7. finally:
            1. 最终语句
      2. 作用：
         1. 尝试捕获异常，将程序由异常状态转为正常状态并正常执行。
         2. as 变量里面的变量绑定了错误原因

```python
try:
    s=int(input('请输入内容:'))
    10/s
except(ValueError) as err:  #ZeroDivisionError
    print(err)
except:
    print('其他异常')
else:
    print('没有异常')
finally:
    print('pass')
```

### try-except语句说明：

1. as子句是用于绑定错误对象的变量
2. except子句可以有一个或多个，但至少有一个
3. else子句最多只能有一个,也可以省略不写
4. finally子句最多只能有一个，可以省略不写
5. else子句的语句将在try语句没有发生异常时执行
6. finally子句的语句在任何情况下都会执行

### try-finally

- 语法：
  - try:
    - 可能触发异常的语句
  - finally:
    - 最终语句
- 说明：
  1. 通常用try-finally语句来做触发异常是必须要处理的事情
  2. 无论异常是否发生，finally子句都会执行
- 注意：
  - 不会改变程序的异常状态

## raise 语句

- 作用：
  - 触发一个异常，让程序进入异常状态发送错误通知给调用者
- 语法：
  - raise 异常类型	或者	raise	异常对象

```python
def make_exception():
    print('函数开始')
    err = ValueError('自定义错误')
    raise err
    print('end')
    
try:
    make_exception()
except ValueError as err:
    print('错误对象：',err)
    
函数开始
错误对象： 自定义错误
```

### 练习

写一个函数get_age()用来获取一个人的年龄信息，此函数规定用户只能输入1-10之间的整数，如果用户输入其他数据直接触发ValueError类型错误通知

错误通知：

​		如果用户输入大于140，则触发ValueError(‘年龄超出正常值’)

​		如果用户输入小于1，则触发ValueError(‘年龄太小’)

```python
def get_age():
    try :
        age = int(input("请输入年龄："))
    except ValueError as err:
        print('请输入数字')
        raise err
    if age>140:
        err = ValueError("年龄超出正常值")
        raise err
    elif age<1:
        err = ValueError("年龄太小")
        raise err

try:
    get_age()
except ValueError as err:
    print(err)
except:
    pass
```



### assert 语句

- 语法：
  - assert 真值表达式：错误数据
- 作用：
  - 当真值表达式为False，用错误数据

```python
def get_score():
    s = int(input ('请输入学生成绩'))
    assert 0<=s<=100, '成绩超过范围'
    return s
try :
    score=get_score()
except AssertionError as err:
    print(err)
    score=0
print(score)
```

### 总结：

1. try-except语句：
   1. 用于接收异常语句，捕获异常
2. try-finally语句：
   1. 执行必须要执行的语句
3. raise语句：
   1. 发送异常通知，并进入异常状态
4. assert语句：
   1. 根据条件选择性的发送AssertionError类型的异常通知
5. 为什么要用异常处理机制：
   1. 在程序中调用层数较深时，向主函数传递错误信息需要层层return返回比较麻烦，用异常处理机制可以比较简单地传递错误信息

# 模块

模块导入

1. import 语句

   1. 语法：
      1. import 模块名 [as 模块新名字1] 模块名2 [as 模块新名字2]
   2. 作用：
      1. 将模块整体导入到当前模块中
   3. 用法：
      1. 模块名.属性名	或	模块名.属性名(实参传递)

2. from import 语句

   1. 语法：
      1. from	模块名	import	模块属性名1	[as 属性新名1]，
         1. ​										模块属性名2	[as 属性新名2]
   2. 作用：
      1. 将某模块的所有属性导入到当前模块

### 时间模块

1. 定义：
   1. 时间戳表示从1970年一月一日00:00:00开始按毫秒计算的偏移量
2. 时间格式化符号
   1. %d		一个月中的第几天(1-31)
   2. %H		一个天中的第几个小时(00-23)
   3. %m		月份(1-12)
   4. %M		分钟数(00-59)
   5. %Y		完整的年份
   6. %S		秒(0-59)  
3. time模块
   1. time()函数
      1. 作用：
         1. 用来返回当前时间的时间戳
      2. 用法：
         1. time.time()
         2. localtime()
            1. 格式化时间戳为本地时间#可以访问里面的对象
         3. asctime()
            1. 用于接收时间元组并返回一个可读时间字符串
         4. sleep(v)函数
            1. 让程序推迟v秒
4. datetime模块
   1. today()函数
      1. 语法：
         1. datetime.datetime.today()
      2. 作用：
         1. 此函数datetime指是的datetime.datetime类,返回一个表示当前本地时间的datetime对象

### 练习自己写一个程序，以电子表格HH:MM:SS显示时间，要求每过一秒变换一次

```python
import time
print(time.time())
1562914466.5569475

print(time.localtime())
time.struct_time(tm_year=2019, tm_mon=7, tm_mday=12, tm_hour=14, tm_min=54, tm_sec=32, tm_wday=4, tm_yday=193, tm_isdst=0)

print(time.asctime())
Fri Jul 12 14:54:32 2019
        
import datetime 
print(datetime.datetime.today())
2019-07-12 15:03:25.724390
        
#练习
while True:
    date = time.localtime()
    print('%02d:%02d:%02d' % date[3:6])
    print('%02d:%02d:%02d' % (date.tm_hour,date.tm_min,date.tm_sec))
    time.sleep(1)
    
date = time.localtime()
cursec = date.tm_sec;
while True:
    date = time.localtime()
    newsec=date.tm_sec
    if cursec<newsec:
        cursec=newsec
        print('%d:%d:%d' % (date.tm_hour,date.tm_min,date.tm_sec))
```

# 文件操作

文件是用于数据存储的单位

文件通常用来长期存储数据

文件中的数据是以字节为单位进行顺序存储

## 文件的操作流程

1. 打开文件
2. 读写文件
3. 关闭文件

## 文件操作类型

1. 文本文件操作
2. 二进制文件操作

### 文本文件操作

1. 操作模式
   1. mode = t
   2. 说明：
      1. 1.默认文件中存储的都是字符数据，在读写过程中会自动进行遍历解码操作
      2. 文本文件以进行为单位进行分隔，在Python内部统一用‘\n’作为换行符进行分隔
      3. 对文本文件的读写操作需要字符串(str)进行数据操作
2. 文件的打开操作
   1. open(file,mode=’rt’)用于打开一个文件，返回此文件的数据流对象，如果打开文件失败则会触发OSError
3. 文件的关闭
   1. f.close()关闭文件，释放系统资源
4. 文件的读操作
   1. f.read()
      1. 说明：
         1. 从一个文件流中读取全部字符
   2. f.readline()
      1. 说明：
         1. 读取文件一行的内容,到最后一行则返回空行
   3. f.readlines()
      1. 说明返回每行字符串的列表
5. 文件的写操作
   1. f.write()
      1. 说明：
         1. 返回写入的字符数或者字节数
   2. f.writelines()
      1. 说明：
         1. 将字符串的列表或者字符串的列表中的内容写入文件

### str.eval()

将字符串以表达式进行读取

### 二进制文件

1. 操作模式

   1. mode = ‘b’
   2. 文件的读操作：
      1. 二进制文件操作需要用字符串进行读写
      2. 对于文本文件，f.read()等函数返回为字符串(str)
      3. 对于二进制文件，f.ead()等函数返回为字节串(bytes)
   3. f.werit()对于二进制文件需要用字节串进行操作

2. GBK（二进制编码，共21003个字）

3. GB2312(二进制编码字节，共6763个汉字)

4. 编码注释:

   ```python
   #-*- coding:gbk -*- 设置源文件编码格式为gbk
   #-*- coding:utf-8 -*-
   ```

   5. 总结
      1. ‘r’以只读方式打开（默认）
      2. ‘w’默认以只写方式打开,删除原有文件内容，如果文件不存在则创建并以只读打开
      3. ‘x’创建一个新文件，并以读写模式打开这个文件，如果文件存在测产生FileExistError
      4. ‘a’以只写方式打开，如果原文件有内容，则追加到文件的末尾
      5. ‘b’用二进制打开文件
      6. ‘t’以文本文件模式打开（默认）
      7. ‘+’为更新内容打开一个磁盘文件（可读可写）
   6. 说明：
      1. 缺省模式为‘rt’
      2. ‘w+b’可以实现二进制文件的随机读写，打开文件时，文件的内容将清零
      3. ‘r+b’可以二进制读和更新模式打开文件，打开文件时不会清空文件内容
      4. ‘r+’以文件读和更新模式打开，打开文件不清空文件内容

# 函数式编程

1. 函数式编程是指用一系列函数解决问题
   1. 优点：
      1. 用每一个函数解决细小的功能，一系列函数的任意组合可以完成大问题
      2. 函数仅接收输入并产生输出，不包含任何影响输入端内部状态
2. 函数的可重入性
   1. 如果一个函数的输入参数一定，则返回结果必须是一定的函数，称为函数的可重入性
3. 函数式编程的要求
   1. def创建的函数最好不要访问局部变量以外的变量，保证返回结果的唯一性

以上内容都是面向过程编程：

面向对象编程：

- 对象：

  - 生活中的物体和实体
  - 特征：
    - 对象有很多属性（名词，形容词）
    - 对象有很多行为（动词，动作）
  - 面向对象
    - 把一切事物看成对象（实例），用各种对象之间的关系来描述事物

- 类：

  - 定义：

    - 1.拥有相同属性和行为的对象为一组，即为一个类
    - 类是用来描述对象的工具，用类可以创建此类的对象（实例）

  - 类的创建语句

    - class 类名（继承列表）
    - 类的文档字符串
    - 实例方法的定义
    - 类变量的定义
    - 类方法的定义
    - 静态方法的定义

  - 作用：

    - 创建一个类
    - 类用于描述对象的行为和属性
    - 类用于创建此类的一个或者多个对象（实例）

  - 说明：

    - 类名必须是标识符
    - 类名实质上就是变量，它绑定了一个类

  - 构造函数

    - 构造函数的调用表达式：
    - 语法：
      - 类名（[创建参数列表]）
    - 作用：
      - 创建这个类的实例对象，并返回此实例的引用关系
    - 实例对象说明：
      - 实例有自己的作用域和名字空间，可以为该类的对象添加实例变量（属性）
      - 实例可以调用类的方法和实例方法
      - 实例可以访问类变量和实例变量
    - 继承：
      - 语法：
        - class 类名(继承列表)
          - def 实例方法名(self,参数1,参数2)
          - ‘文档字符串’
          - 语句
        - 作用：
          - 用于描述一个对象的行为，让此类型的全部对象都拥有相同的行为
      - 说明：
        1. 实例方法实质是函数，是定义在类内的函数。
        2. 实例方法至少有一个形参，第一个形参代表调用这个方法的实例，一般命名为‘self’
      - 实例方法的调用
        - 实例方法名（调用传参）或类名.实例方法名(实例.调用传参)

  - 实例属性

    - 每个实例对象可以有自己的变量称为实例变量（也叫属性）

    - 语法：

      - 实例.属性名

    - 赋值规则：

      - 首次为属性赋值则创建此属性
      - 再次为属性赋值则修改属性的绑定关系

    - 作用：

      - 记录每个对象自身的数据

    - 删除属性del语句

      - del 对象.实例变量名

      - 实例：

      - ```python
        class Dog:
            pass
        d1 = Dog()
        d1.color = 'red'
        del d1.color
        ```

      - ```python
        class Dog:
            # def __init__(self, food, score):
            #     self.food = food
            # Dog():
            #     print('this is a dog')
            def eat(self,food):
                print('I`m eating %s' % food)
            def play(self,k):
                print('我玩了%s' % k)
            def sleep(self,time):
                print('我睡了%d' % time+'s')
            def getage(self):
                print('age:%d' % self.age)
            
        a1=Dog()
        a1.eat('apple')
        a1.play('leetcode')
        a1.sleep(50)
        a1.age =10
        a1.getage()
        print(a1.age)
        ```
      

# 网络爬虫

1. 网络爬虫（网络爬虫，网络机器人）
2. 定义：
   1. 抓取网络数据的程序
3. 用python程序模仿人点击浏览器访问网站
4. 目的：获取大量的数据进行分析

1. 企业获取数据的方式
2. 通过第三方平台获取数据
3. 爬虫爬取数据

1. 请求模块，解析模块丰富成熟，scrapy框架
2. 请求模式是请求网站后返回网站的所有代码，而解析模块可以从网页进行分析获取到我们想要的数据
3. PHP做爬虫的特点，对多线程，异步支持不好
4. java代码量大
5. c/c++效率高，成型慢

### 爬虫分类

1. 通用网络爬虫（搜索引擎，遵守robots协议）

   1. 比如：百度，谷歌

   2. robots：网站通过robots协议

   3. ```txt
      User-agent: AdsBot-Google#名字
      Allow: /maps/api/js?
      Disallow: /maps/api/js/
      Disallow: /maps/api/place/js/
      Disallow: /maps/api/staticmap?
      Disallow: /maps/api/streetview?
      Disallow: /maps/api/streetview/
      
      Disallow /$首页
      Disallow /表示除了以上的都不能爬
      每一个网站都有自己的robots协议，百度快照是百度爬虫爬出的
      ```

      1. 搜索引擎获取新网站的url：
         1. 百度站长
         2. 和DNS服务器（万网），快速收录新网站

2. 聚焦网络爬虫

   1. 面向主题，面向需求的爬虫

3. 爬虫的步骤：

   1. 确定需要爬取的地址
   2. 通过http,https来获取相应的html页面
   3. 解析响应
      1. 所需数据，保存
      2. 页面中的新url，继续第二步

4. url

   1. 统一资源定位符
   
2. https://www.google.com/search?q=kfasf&ie=UTF-8
   
   3. 协议       域名		资源路径	查询参数
   
4. 多个查询参数之间用&隔开
   
5. 请求头

   ```javascript
   :authority: www.google.com
   :method: GET
   :path: /search?q=PHP%E7%88%AC%E8%99%AB&ie=UTF-8
   :scheme: https
   accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;
   */q=0.8,application/signed-exchange;v=b3//支持文件类型
   accept-encoding: gzip, deflate, br//支持解压
   accept-language: ja-JP,ja;q=0.9,ko-KR;q=0.8,ko;q=0.7,zh-CN;q=0.6,zh;q=0.5,en-US;q=0.4,en;q=0.3,zh-TW;q=0.2
   cache-control: no-cache
   cookie: CGIC=InZ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIz; SID=YgfIp0d0kqDkYk28Wtfb0724qc-pNlkuRrTZf61DWAnxdu4amxd3wfYKC4GgS35mOCEyLQ.; HSID=AaGJCJVRqPqpok2kQ; SSID=AvaikDHJ56Flxc3Us; APISID=hkEzXeIQHFE7xKrU/A7pJyfhiirjb4VZVi; SAPISID=-rpWQBScqGWegd4C/AFMJyRK6XQbwGc3SC; CONSENT=YES+CN.zh-CN+20170625-09-0; ISSW=1; SEARCH_SAMESITE=CgQIro0B; NID=188=GhntE6UMXWr_lsDDxE85tv45Ret0TaxDrVTDPWG5LbtMXkGufcLnzjxTc439moRR4NE2Tp-4umCVBJIORr46at_T_AtI5Vg31YvVAQ_EBZXu-HAG-Nv2TlnpJIHA_LobjwIUr2kH1-OO-KnsK0oS7Ahkf3U0-uo_mcaKkOiBsA3kj6XYakZDAsUNVMz0rdnZ2l4eccJpLqiNy4b5PV6Uc3U_eDhsP4wF6Hq8LOw_XCDDPuN5nYvEWx6-I-qX0xBPJnq2G_l_jOSOAq53VAFoA2rOP48VfWT0_VvFvKg; DV=o6hvFslO4h9HYPXf0FOdhZDnk7z6vxawjap4JjqDLAAAAABCq40Tv4P5FgAAAASIm0L1K13fBQAAAA; 1P_JAR=2019-07-17-11; SIDCC=AN0-TYtmXxaSSh2N-6rDdO1bmXbYZU4ueA8Mj2-I_bwVn4IDp0t2j-eXNfbQwkbrs62Bd3r1Lyg
   pragma: no-cache
   upgrade-insecure-requests: 1
   user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.142 Safari/537.36
   x-client-data: CI22yQEIprbJAQjBtskBCNG3yQEIqZ3KAQioo8oBCLGnygEI4qjKAQjxqcoBCJetygEIzK3KAQ==
   ```

6. get/post请求

   1. get:查询参数在url地址上线显示出来
   2. post:Form表单提交，传输大文本，数据隐藏在from表单中，不会在url中显示

7. 爬虫的请求库

   1. 常用模块
   2. urllib,request,urlopen(‘url’)
      1. 作用：
         1. 向网站发起请求并获取响应对象
         2. 字节流 = response.read()
         3. 字符串流 = response.read().decode(‘utf-8’)
         4. encode():字符串–>bytes
         5. decode():bytes–>字符串
      2. 练习：
         1. 通过请求方式爬取百度首页
   
10. 重构user-agent

    1. requset.Request(‘添加User-Agent’)
    2. urllib.request.Request(‘URL’,headers = headers)
       1. User-Agent是爬虫和反爬虫斗争的第一步，发送请求必须带User-Agent
    3. 使用流程：
       1. 创建请求对象
          1. request = urllib.request.Request(‘url’,……)
       2. 发送请求获取响应对象
          1. response = urllib.request.urlopen(request)
       3. 获取响应内容
          1. html = response.read().decode(‘utf-8’)
    4. getcode()返回状态码
    5. getulr() 返回url
    6. urllib,parse编码模块
       1. urllib.parse.urlencode()
    7. urllib,urllib2,urllib库的关系
       1. python2中：
          1. urllib
          2. urllib2发送请求
       2. python3:
          1. 合并
    8. 案例：
       1. 百度贴吧数据抓取
          1. 要求：
          2. 抓取的贴吧名称
          3. 起始页
          4. 终止页
          5. 保存到本地
       2. 步骤：
    9. 正则解析模块
       1. 动机：
          1. 文本处理已经成为计算机常见工作之一
          2. 对文本内容的搜索，定位，提取是逻辑比较复杂的工作
          3. 为了快速方便得解决上述问题，产生了正则表达式
       2. 定义：
          1. 文本的高级匹配模式，提供搜索，替换功能，其本质是由一系列的字符和特殊字符构成的字符串，这个字符串即正则表达式
       3. 目标：
          1. 正则表达式符号
          2. 知道什么是正则表达式
          3. 能够读懂正则表达式，编写简单的正则匹配
          4. 会用re模块操作正则表达式
    10. 数据的分类
        1. 结构化数据
        2. 特点：有固定格式，HTML
    11. 非结构化数据
        1. 图片，音频，视频
    12. re模块：
        1. f_list = re.finall(‘正则’,‘字符串’,re.s)
        2. 创建编译对象：
           1. p = re.comple(‘正则表达式’,re.s)
           2. r_list = p.findall(html)
        3. match(s) 字符串开头的第一个，返回对象
        4. search(s) 从开始往后找，匹配第一个，返回对象
        5. group() 从match或search返回的对象中取值
        6. findall() 返回全部匹配，返回一个列表
    13. 元字符
        1. . 匹配任意一个字符（不包含\n）
        2. \d 一个数字
        3. \s 空白字符
        4. \S 除了\s
        5. [] 包含[]内容
        6. \w 普通字符
        7. \W 除了\w
        8. \*  0此或多次
        9. \+  一次或多次
        10. ？ 0此或一次
        11. {m} m次 {m-n} m到n此
        12. 贪婪与非贪婪：
            1. (.*) 在整个表达式匹配成功的前提下尽量多地去匹配
            2. (.*?) 在整个表达式匹配成功的前提下尽量少地去匹配
    14. 正则表达式分组
        1. \w	\s	一次或多次
    15. CSV模块使用流程
        1. 导入模块
        2. import csv
        3. 打开文件（xxx.csv）
           1. with open(‘xxx.csv’,‘a’) as f:
              1. pass
        4. a & a+ ‘追加功能
        5. a 追加写
        6. a+ 追加写读，先写后读
        7. 都只能在末尾追加以上
        8. a+默认光标在末尾，当执行一个操作后无论读写，光标都会回到开头
        9. r和r+ 读功能
        10. r 只读
        11. r+ 读写，先读后写
        12. r可以利用光标移动来选择读取内容
        13. r++默认光标在开头，执行一个操作以后光标移动到末尾，写的内容如果在末尾就是添加，在原文件中就是修改
        14. w 和 w+写功能
        15. w 只写
        16. w+ 写读
        17. 两个都是写功能，只要进行操作就是先自动清空，再写入，每次都是先进行新建文件
        18. 由于先建了文本，导致w+读取要先移动光标位置
        19. 初始写入对象
            1. writer=csv.writer(f)
        20. 写入数据
            1. writer.writerrow([‘a’,‘b’])
            2. writer.writerrow([‘c’,‘d’])
        21. 猫眼电影数据爬取
            1. 网址： 猫眼电影 - 榜单- top100
            2. 目标：电影名称，主演，上映时间
            3. 保存，本子文件
            4. 步骤：
               1. 找url规律
               2. 第一页-n页